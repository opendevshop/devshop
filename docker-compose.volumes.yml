#
# docker-compose.volumes.yml
#
# This dockerfile is for local development only. It maps the development folders to volumes,
#
version: '2.2'
services:
  devshop:
    # Change the entrypoint to the volume-mounted copy.
    entrypoint: /usr/share/devshop/docker/bin/docker-systemd-entrypoint
    volumes:
      # Development volumes

      # DevShop Core.
      - ./:/usr/share/devshop:delegated

      # App User Home
      - ./aegir-home:/var/aegir:delegated

      # Devmaster Drupal Install Profile
      # This volume injects the folder `./devmaster` into the "hostmaster" platform in the container.
      - ./devmaster:/usr/share/devshop/src/DevShop/Templates/DevShopControlTemplate/web/profiles/devmaster

      - $HOME/.ssh:/var/aegir/.ssh
      - ./.github/.test-artifacts:/var/aegir/test-artifacts
