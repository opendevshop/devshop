name: Install Methods
on:
  push:
    branches: 1.x
  pull_request:
    types: [opened, synchronize]
jobs:
  install_script:
    name: Install Script
    runs-on: ubuntu-latest
    env:
      # The version of devshop to install with install.sh.
      # This variable is overwritten to match the PR in the first step.
      DEVSHOP_VERSION: 1.x

    steps:
    - name: Install PR version of DevShop
      if: github.event_name=='pull_request'
      run: echo "DEVSHOP_VERSION=${{ github.event.after }}" >> $GITHUB_ENV
    - uses: actions/checkout@v2
    - name: Run Install Script
      run: bash .github/workflows/install-sh-test.sh
